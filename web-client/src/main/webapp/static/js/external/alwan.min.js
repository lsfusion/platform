!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Alwan",[],e):"object"==typeof exports?exports.Alwan=e():t.Alwan=e()}(self,(function(){return function(){"use strict";var t={d:function(e,s){for(var o in s)t.o(s,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:s[o]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return Xt}});const s="alwan",o=`${s}__container`,r=`${s}__palette`,n=`${s}__marker`,i=`${s}__preview`,a=`${s}__button`,l=`${s}__copy-button`,h=`${s}__slider`,c=`${s}__sliders`,p=`${s}__slider--hue`,u=`${s}__slider--alpha`,_=`${s}__input`,d=`${s}__inputs`,g=`${s}__swatch`,f=`${s}__swatches`,b=`${s}__preset-button`,m=`${s}__backdrop`,y=`${s}__toggle-button`,w=`${s}--popup`,v=`${s}--open`,$=`${s}--collapse`,x=document,L=x.documentElement,A="#000",S="button",C="open",H="close",O="color",j="click",k="pointerdown",M="pointermove",V="pointerup",z="keydown",B="input",F="change",E="rgb",I="hsl",D=["hex",E,I],P="afterbegin",Z="afterend",q="beforeend",K="aria-label",N={ArrowRight:1,ArrowLeft:-1},R={ArrowDown:1,ArrowUp:-1},T=(t,e,s)=>{t.addEventListener(e,s)},U=(t,e,s)=>{t.removeEventListener(e,s)},{keys:G,assign:J,setPrototypeOf:Q,prototype:W}=Object,{from:X,isArray:Y}=Array,tt=(t,e)=>{let s=G(t);for(const o of s)e(t[o],o)},et=(t,e)=>{tt(e,((s,o)=>{o in t&&("object"!=typeof s||Y(s)?t[o]=e[o]:(t[o]=J({},t[o]),et(t[o],s)))}))},st=t=>"string"==typeof t,ot=t=>null!=t,rt=({shared:t,toggle:e})=>t||e,nt=()=>x.body,it=(t,e=nt(),s=!1)=>st(t)&&t.trim()?e["querySelector"+(s?"All":"")](t):t instanceof Element&&nt().contains(t)&&t!==nt()?t:null,at=(t,e,s=q)=>{t&&e&&e.insertAdjacentElement(s,t)},lt=(t,e)=>{t.innerHTML=e},ht=(t,e,s,o,r)=>{const n=x.createElement(t||"div");return e&&(n.className=e),tt(o||{},((t,e)=>{"html"===e?lt(n,t):t&&n.setAttribute(e,t)})),s&&at(n,s,r),n},ct=t=>{let e,s,o,r,n,i;return t===x?(e=s=0,o=n=L.clientWidth,r=i=L.clientHeight):({x:e,y:s,width:o,height:r,right:n,bottom:i}=t.getBoundingClientRect()),[e,s,o,r,n,i]},pt=(t,e)=>(t.replaceWith(e),e),ut=t=>(t&&t.remove(),null),_t=(t,e=[x])=>(t&&(t=t.parentElement),t&&t!==nt()?(/auto|scroll|overflow|clip|hidden/.test(getComputedStyle(t).overflow)&&e.push(t),_t(t,e)):e),dt=(t,e,s)=>t?t.style[ot(s)?"setProperty":"getPropertyValue"]("--alwan-"+e,s):"",gt=(t,e,s)=>{st(e)&&(e=[e]),e.forEach((e=>{e&&t.classList.toggle(e,s)}))},ft=(t,e,s,o,r,n)=>ht(S,a+" "+t,e,J({type:S,[K]:o,title:r||o},s),n),bt=(t,e,s)=>{t.style.transform=`translate(${e}px,${s}px)`},mt=(t,e,s,o)=>ht(B,h+" "+t,e,{type:"range",max:s,step:o}),yt=(t,e)=>ht("",o,t,{},e),wt=(t,e)=>{t&&t.setAttribute(K,e)},vt=(t,e)=>{let s=t||ft(b,nt()),o=[],r=()=>{e.toggle()};return{t:()=>s,i({preset:e,classname:n}){t&&e!==(t!==s)&&(s=e?pt(t,ft(b,null,{id:t.id})):pt(s,t)),T(s,j,r),t&&!e||!st(n)||(gt(s,o,!1),o=n.split(/\s+/),gt(s,o,!0))},p(t){if(ot(t)){const{config:o,u:r}=e,n=r.m._;o.disabled=s.disabled=!!t,t?n(e,!1,!0):rt(o)||n(e,!0,!0)}},v(){t?(this.i({preset:!1}),U(s,j,r)):s=ut(s)}}},{parseFloat:$t,parseInt:xt,isFinite:Lt}=Number,{min:At,max:St,abs:Ct,round:Ht,PI:Ot}=Math,jt=(t,e=100,s=0)=>At(St(t,s),e),kt=t=>(Ht(t)%360+360)%360,Mt={top:[1,5,4,0],bottom:[5,1,4,0],right:[4,0,1,5],left:[0,4,1,5]},Vt={start:[0,1,2],center:[1,0,2],end:[2,1,0]},zt=(t,e)=>{let s=null,o=!1;const r=(o,r=e)=>{const l=(e=r).u,{theme:h,popover:c,target:p,position:u,margin:_,id:d}=o,g=e.$.t(),f=it(p)||g,b=rt(o);st(d)&&!Tt(l)&&(t.id=d),tt(l,(({i:t})=>{t&&t(o,e)})),t.dataset.theme=h,b||a(e,!0,!0),g.style.display=c||b?"":"none",gt(t,w,c),s&&(s.v(),s=null),c?s=((t,e,{A:s,C:o},r,n)=>{st(s)&&(s=$t(s));const i=Lt(s)?s:0,[a,l]=st(o)?o.split("-"):[],h=Mt[a]||Mt.bottom,c=Vt[l]||Vt.center,p=_t(t),u=()=>{const s=ct(x),o=ct(t),r=ct(e),n=[];h.some((t=>{let e=t%2;const a=s[t],l=o[t],h=i+r[e+2];if(h<=Ct(a-l)){n[e]=l+(t<=1?-h:i),e=(e+1)%2;const a=r[e+2],p=o[e],u=o[e+4],_=s[e+4]-p,d=(a+o[e+2])/2;return c.some((t=>0===t&&a<=_?(n[e]=p,!0):1===t&&d<=u&&d<=_?(n[e]=u-d,!0):2===t&&a<=u&&(n[e]=u-a,!0))),!0}})),bt(e,...n.map(((t,e)=>Ht(ot(t)?t:(s[e+4]-r[e+2])/2))))},_=()=>p.every((e=>{const[s,o,,,r,n]=ct(t),[i,a,,,l,h]=ct(e);return o<h&&n>a&&s<l&&r>i})),d=()=>{r(u,_)},g=t=>{p.forEach((e=>{t(e,"scroll",d)})),t(window,"resize",d),t(x,z,n),t(x,k,n)};return u(),g(T),{H:u,v(){g(U),e.style.transform=""}}})(f,t,{A:_,C:u},n,i):at(t,f,f===g?Z:q),e.O.H({},null,!0)},n=(t,s)=>{!o&&rt(e.config)||(s()?o?(t(),e.config.closeOnScroll&&a(e,!1)):a(e,!0,!0):a(e,!1,!0))},i=s=>{if(o){let o,r,n,i,{target:l,key:h,shiftKey:c}=s,p=e.$.t();"Escape"===h||l!==p&&!t.contains(l)&&!X(p.labels||[]).some((t=>t.contains(l)))?a(e,!1):"Tab"===h&&(o=X(it("button,input,[tabindex]",t,!0)),r=o[0],n=o.pop(),l!==p||c?(c&&l===r||!c&&l===n)&&(i=p):i=r,i&&(s.preventDefault(),i.focus()))}},a=(s,n,i)=>{const h=(s=s||e).config;h.disabled&&!i||(ot(n)||(o&&s!==e&&a(e,!1),n=!o),n!==o&&(rt(h)||i)&&(n&&(s!==e&&r(h,s),n&&l()),s===e&&(o=n,gt(t,v,n),e.k.j(n?C:H,t))))},l=()=>{s&&s.H()};return{M:r,V:l,_:a,B:()=>o,v:()=>{s&&s.v(),ut(t)}}},Bt='<svg width="18" height="18" viewBox="0 0 24 24" aria-role="none"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg>',Ft=(t,e)=>{let s="",o=t.a,r=e;return o<1&&(r+="a",s=", "+o),e===E?r+`(${t.r}, ${t.g}, ${t.b+s})`:r+`(${t.h}, ${t.s}%, ${t.l}%${s})`},Et=ht("canvas").getContext("2d"),It=/^hsla?\(\s*([+-]?\d*\.?\d+)(\w*)?\s*[\s,]\s*([+-]?\d*\.?\d+)%?\s*,?\s*([+-]?\d*\.?\d+)%?(?:\s*[\/,]\s*([+-]?\d*\.?\d+)(%)?)?\s*\)?$/,Dt=/^#[0-9a-f]{6}$/i,Pt={deg:1,turn:360,rad:180/Ot,grad:.9},Zt=(t="",e)=>{let s,o,r="";st(t)?r=t.trim():(t=t||{},o=[E,I].find((e=>e.split("").every((e=>Lt($t(t[e])))))),o&&(r=Ft(t,o)));let[n,i,a,l,h,c=1,p]=It.exec(r)||[];if(n)s={h:kt(i*(Pt[a]?Pt[a]:1)),s:Ht(jt(l)),l:Ht(jt(h)),a:jt(p?c/100:c,1)},o=I;else if(o=E,Et.fillStyle=A,Et.fillStyle=r,r=Et.fillStyle,Dt.test(r))s={r:xt(r.slice(1,3),16),g:xt(r.slice(3,5),16),b:xt(r.slice(5,7),16),a:1};else{const[t,e,o,n]=/\((.+)\)/.exec(r)[1].split(",").map((t=>$t(t)));s={r:t,g:e,b:o,a:n}}return s.a=Ht(100*s.a)/100,r=Ft(s,o),e?r:[s,o,r]},qt=(t,e)=>{let s,o,r;return{i({swatches:n,toggleSwatches:i},a){e=a||e,o=[],Y(n)&&(o=n,s=ut(s),r=ut(r),n.length&&(s=ht("",f,t),n.forEach((t=>{dt(ft(g,s,{},e.config.i18n.buttons.swatch+": "+t,t),O,Zt(t,!0))})),i&&(r=ft(y,t,{html:'<svg width="20" height="20" viewBox="0 0 24 24" aria-role="none"><path d="M6.984 14.016l5.016-5.016 5.016 5.016h-10.031z"></path></svg>'}),T(r,j,(()=>{gt(s,$),e.reposition()}))),T(s,j,(({target:t})=>{t!==s&&e.O.F(dt(t,O),t,!0)}))))},I(t){e.config.swatches=[...o,...t],this.i(e.config)},D(t){e.config.swatches=o.filter(((e,s)=>!t.some((t=>t===e||xt(t)===s)))),this.i(e.config)}}};let Kt=null,Nt=0;const Rt=t=>{const e=ht("",s,nt()),o=zt(e,t),a=((t,e)=>{let s,o,i,a,l=!1;const h=ht("",r,t,{tabindex:"0"}),c=ht("",n,h),p=(t,r)=>{let n,a,[l,p,u,_]=i;t?(l=t.clientX-l,p=t.clientY-p):(l=s+r.x*u/100,p=o+r.y*_/100),l=jt(l,u),p=jt(p,_),l===s&&p===o||(s=l,o=p,bt(c,s,o),n=1-p/_,a=n*(1-l/(2*u)),e.O.H({S:1===a||0===a?0:(n-a)/At(a,1-a),L:a},h))},u=t=>{l&&p(t)},_=t=>{l&&(e.O.P(h,!0),a=ut(a),l=!1)};return T(h,k,(t=>{a||(a=ht("",m,L)),e.O.Z(),i=ct(h),l=!0,p(t)})),T(x,M,u),T(x,V,_),T(h,z,(t=>{const s=t.key,o=N[s]||0,r=R[s]||0,n=e.O;(o||r)&&(t.preventDefault(),i=ct(h),n.Z(),p(null,{x:o,y:r}),n.P(h,!0))})),{i(t,s){wt(h,(e=s||e).config.i18n.palette)},H({h:t,S:e,L:r},n){dt(h,"h",t),n&&(i=ct(h),o=r+e*At(r,1-r),s=(o?2*(1-r/o):0)*i[2],o=(1-o)*i[3],bt(c,s,o))},v(){U(x,M,u),U(x,V,_)}}})(e,t),h=yt(e),g=((t,e)=>{let s,o,r;const n=t=>{r=t,lt(o,t?'<svg width="18" height="18" viewBox="0 0 24 24" aria-role="none"><path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"></path></svg>':Bt)},a=t=>{let e=ht(B,"",L,{value:t});e.select(),x.execCommand("copy"),e=ut(e),o.focus(),n(!0)},h=()=>{if(!r&&!e.config.disabled){const t=navigator.clipboard,s=e.O.q(!0);t?t.writeText(s).then((()=>n(!0))).catch((()=>a(s))):a(s)}};return{i({preview:a,copy:c},p){e=p,s=ut(s),o=ut(o),a&&(s=ht("",i,t,{},P)),c&&(o=ft(l,s||t,{html:Bt},e.config.i18n.buttons.copy,"",P),T(o,j,h),T(o,"blur",(()=>r&&n(!1))),T(o,"mouseout",(()=>o.blur())))},K(t){dt(s,O,t)}}})(h,t),f=((t,e)=>{let s;const o=ht("",c,t),r=mt(p,o,360),n=({target:t,type:s,target:{value:o}})=>{s===F?e.O.P(t):e.O.H(t===r?{h:360-o}:{a:1*o},t)};return T(o,B,n),T(o,F,n),{i({opacity:t},n){e=n||e;const{hue:i,alpha:a}=e.config.i18n.sliders;s=ut(s),t?s=mt(u,o,1,.01):e.O.H({a:1}),wt(r,i),wt(s,a)},H({h:t,a:e},o,n){dt(s,E,o),n&&(r.value=360-t,s&&(s.value=e))}}})(h,t),b=((t,e)=>{let s,o,r,n,i,a=[],l=!1;const h=()=>e.config.singleInput||"hex"===a[n],c=()=>{i={},ut(o),o=ht("",d,s,{},P);const t=e.O.q(),r=a[n];(h()?[r]:(r+(e.config.opacity?"a":"")).split("")).forEach((e=>{const s=ht("label","",o);i[e]=ht(B,_,s,{type:"text",value:t[e]+""}),ht("span","",s,{html:e})})),T(o,B,u),T(o,F,u),T(o,"focusin",(t=>{t.target.select()})),T(o,z,(t=>{"Enter"===t.key&&e.close()}))},p=()=>{n=(n+1)%a.length,e.O.N(a[n]),c()},u=({target:t,type:s})=>{if(s===F)e.O.P(t,!0),l=!1;else{l||(e.O.Z(),l=!0);let s=t.value,o={};h()||(tt(i,((t,e)=>{o[e]=$t(t.value)})),s=Ft(o,a[n])),e.O.F(s,t)}};return{i({inputs:o,format:i},l){e=l||e,a=D,!0!==(o=o||{})&&(a=a.filter((t=>o[t])));const h=a.length;h||(a=D),n=St(a.indexOf(i),0),e.O.N(a[n]),s=ut(s),r=ut(r),h&&(s=yt(t,Z),c(),h>1&&(r=ft("",s,{html:'<svg width="15" height="15" viewBox="0 0 20 20" aria-role="none"><path d="M10 1L5 8h10l-5-7zm0 18l5-7H5l5 7z"></path></svg>'},e.config.i18n.buttons.changeFormat),T(r,j,p)))},R(t){l||tt(i||{},((e,s)=>{e.value=t[s]}))}}})(h,t);return{m:o,T:a,U:g,G:f,J:b,W:qt(e,t)}},Tt=t=>!!Kt&&t===Kt,Ut=t=>{if(Tt(t)){if(Nt--,Nt>0)return;Kt=null}t.m.v(),t.T.v(),t={}},Gt=t=>(t<16?"0":"")+t.toString(16),Jt=(t,e,s)=>(t%=12,Ht(255*(s-e*At(s,1-s)*St(-1,At(t-3,9-t,1))))),Qt=t=>{let e,s;const o={h:0,S:0,L:0,s:0,l:0,r:0,g:0,b:0,a:1,rgb:"",hex:"",hsl:""},r=t.config;return{H(e,s,n=!1,i){if(!r.disabled){const{r:r,g:a,b:l,a:h}=o;J(o,e),J(o,{s:Ht(100*o.S),l:Ht(100*o.L)},i||(({h:t,S:e,L:s})=>({r:Jt(t/=30,e,s),g:Jt(t+8,e,s),b:Jt(t+4,e,s)}))(o));const{J:c,T:p,G:u,U:_}=t.u,d=Ft(o,E),[g,f]=(({r:t,g:e,b:s,a:o})=>["#"+Gt(t)+Gt(e)+Gt(s),o<1?Gt(Ht(255*o)):""])(o);o.hsl=Ft(o,I),o.hex=g+f,o.rgb=d,dt(t.$.t(),O,d),p.H(o,n),_.K(d),u.H(o,g,n),c.R(o),!s||o.r===r&&o.g===a&&o.b===l&&o.a===h||t.k.j(O,s)}},Z(){e=o[s]},P(r,n){(!n||n&&e!==o[s])&&t.k.j(F,r)},F(t,e,s){let r,n,[i,a,l]=Zt(t);o[a]!==l&&(a===E?(r=i,n=(({r:t,g:e,b:s,a:o})=>{const r=St(t/=255,e/=255,s/=255),n=At(t,e,s),i=r-n,a=(r+n)/2;return{h:kt(60*(0===i?0:r===t?(e-s)/i%6:r===e?(s-t)/i+2:r===s?(t-e)/i+4:0)),S:i?i/(1-Ct(2*a-1)):0,L:a,a:o}})(r)):(n=i,n.S=i.s/100,n.L=i.l/100),this.H(n,e,!0,r),s&&this.P(e))},X:()=>({h:o.h,s:o.s,l:o.l,r:o.r,g:o.g,b:o.b,a:o.a,hex:o.hex,rgb:o.rgb,hsl:o.hsl}),N(t){s=r.format=t},q:t=>t?o[s]:o}},Wt={id:"",classname:"",theme:"light",toggle:!0,popover:!0,position:"bottom-start",margin:0,preset:!0,color:A,default:A,target:"",disabled:!1,format:"rgb",singleInput:!1,inputs:{rgb:!0,hex:!0,hsl:!0},opacity:!0,preview:!0,copy:!0,swatches:[],shared:!1,toggleSwatches:!1,closeOnScroll:!1,i18n:{palette:"Color picker",buttons:{copy:"Copy color to clipboard",changeFormat:"Change color format",swatch:"Color swatch"},sliders:{hue:"Change hue",alpha:"Change opacity"}}};class Xt{static version="1.3.1";static defaults=Wt;constructor(t,e){const s=this;s.config=J({},Xt.defaults),s.k=(t=>{const e={[C]:[],[H]:[],[F]:[],[O]:[]};return{j(s,o){t.config.disabled||(e[s]||[]).forEach((e=>{e(J({type:s,source:o},t.O.X()))}))},Y(t,s){e[t]&&!e[t].includes(s)&&e[t].push(s)},tt(t,s){ot(t)?e[t]&&(ot(s)?e[t]=e[t].filter((t=>t!==s)):e[t]=[]):tt(e,((t,s)=>{e[s]=[]}))}}})(s),s.O=Qt(s),s.$=vt(it(t),s),s.setOptions(e)}setOptions(t){t=t||{};let e,s,o=this,r=o.config,{color:n,disabled:i}=t,a=o.O;o.$.p(i),r.disabled||(et(r,t),o.u=e=(t=>{let{u:e,config:{shared:s}}=t;if(e){if(Tt(e)===s)return e;e.m._(t,!1,!0),Ut(e)}return s?(Kt||(Kt=Rt(t)),Nt++,Kt):Rt(t)})(o),o.$.i(r),s=e.m,Tt(e)&&s._(null,!1),s.M(r,o),ot(n)&&a.F(n))}isOpen(){return this.u.m.B()}open(){this.u.m._(this,!0)}close(){this.u.m._(this,!1)}toggle(){this.u.m._(this)}on(t,e){this.k.Y(t,e)}off(t,e){this.k.tt(t,e)}setColor(t){return this.O.F(t),this}getColor(){return this.O.X()}addSwatches(...t){this.u.W.I(t)}removeSwatches(...t){this.u.W.D(t)}enable(){this.$.p(!1)}disable(){this.$.p(!0)}reset(){this.O.F(this.config.default)}reposition(){this.u.m.V()}trigger(t){this.k.j(t)}destroy(){const t=this;t.$.v(),Ut(t.u),tt(t,((e,s)=>{delete t[s]})),Q(t,W)}}return e=e.default}()}));
//# sourceMappingURL=alwan.min.js.map