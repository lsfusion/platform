{
  "version": 3,
  "file": "subtotal.js",
  "sourceRoot": "\\",
  "sources": [
    "subtotal.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "callWithJQuery = (pivotModule) ->\r\n    if typeof exports is \"object\" and typeof module is \"object\" # CommonJS\r\n        pivotModule require(\"jquery\")\r\n    else if typeof define is \"function\" and define.amd # AMD\r\n        define [\"jquery\"], pivotModule\r\n    # Plain browser env\r\n    else\r\n        pivotModule jQuery\r\n\r\ncallWithJQuery ($) ->\r\n\r\n    class SubtotalPivotData extends $.pivotUtilities.PivotData\r\n        constructor: (input, opts) ->\r\n            super input, opts\r\n            \r\n            @rowAttrGroups = convertAttrsToGroups @rowAttrs, opts.rendererOptions.rowSubtotalDisplay.splitPositions\r\n            @rowAttrIndex = buildRowAttrsIndex @rowAttrGroups\r\n            @callbacks = opts.callbacks\r\n                \r\n        processKey = (callbacks, record, totals, keys, attrs, getAggregator) ->\r\n            key = []\r\n            addKey = false\r\n            for attr in attrs\r\n                key.push record[attr] # ? \"null\"\r\n                flatKey = (if callbacks then callbacks.formatArray(attrs, key) else key).join String.fromCharCode(0)\r\n                if not totals[flatKey]\r\n                    totals[flatKey] = getAggregator key.slice()\r\n                    addKey = true\r\n                totals[flatKey].push record\r\n            keys.push key if addKey\r\n            return key\r\n\r\n        processRecord: (record) -> #this code is called in a tight loop\r\n            rowKey = []\r\n            colKey = []\r\n\r\n            @allTotal.push record\r\n            rowKey = processKey @callbacks, record, @rowTotals, @rowKeys, @rowAttrs, (key) =>\r\n                return @aggregator this, key, []\r\n            colKey = processKey @callbacks, record, @colTotals, @colKeys, @colAttrs, (key) =>\r\n                return @aggregator this, [], key\r\n            m = rowKey.length-1\r\n            n = colKey.length-1\r\n            return if m < 0 or n < 0\r\n            for i in [0..m]\r\n                fRowKey = rowKey.slice(0, i+1)\r\n                flatRowKey = (if @callbacks then @callbacks.formatArray(@rowAttrs, fRowKey) else fRowKey).join String.fromCharCode(0)\r\n                @tree[flatRowKey] = {} if not @tree[flatRowKey]\r\n                for j in [0..n]\r\n                    fColKey = colKey.slice 0, j+1\r\n                    flatColKey = (if @callbacks then @callbacks.formatArray(@colAttrs, fColKey) else fColKey).join String.fromCharCode(0)\r\n                    @tree[flatRowKey][flatColKey] = @aggregator this, fRowKey, fColKey if not @tree[flatRowKey][flatColKey]\r\n                    @tree[flatRowKey][flatColKey].push record\r\n\r\n        sortKeys: () =>\r\n            if not @sorted\r\n                @sorted = true\r\n                @rowKeys.sort @rowAttrsSortPredicate()\r\n\r\n                v = (r,c) => @getAggregator(r,c).value()\r\n                switch @colOrder\r\n                    when \"value_a_to_z\" then @colKeys.sort (a,b) =>  $.pivotUtilities.naturalSort v([],a), v([],b)\r\n                    when \"value_z_to_a\" then @colKeys.sort (a,b) => -$.pivotUtilities.naturalSort v([],a), v([],b)\r\n                    else                     @colKeys.sort @arrSort(@colAttrs, @callbacks)\r\n\r\n        rowAttrsSortPredicate: () =>\r\n            groupPredicates = (@groupPredicate group for group in @rowAttrGroups)\r\n            @multiplePredicatesSort groupPredicates, @callbacks\r\n\r\n        groupPredicate: (attrGroup) =>\r\n            predicates = []\r\n            for sortItem in @sortItems\r\n                if typeof sortItem.value is 'string'\r\n                    if sortItem.value in attrGroup\r\n                        predicates.push @rowAxisPredicate sortItem\r\n                else\r\n                    lastKeyIndex = @rowAttrIndex[attrGroup[attrGroup.length-1]]\r\n                    predicates.push @valuePredicate sortItem, lastKeyIndex\r\n            if predicates.length == 0\r\n                predicates.push @defaultPredicate attrGroup, @rowAttrIndex, @callbacks\r\n            @multiplePredicatesSort predicates, @callbacks\r\n        \r\n        rowAxisPredicate: (sortItem) =>\r\n            index = @rowAttrIndex[sortItem.value]\r\n            (a, b) ->\r\n                if sortItem.direction\r\n                    return $.pivotUtilities.naturalSort(a[index], b[index])\r\n                else\r\n                    return -$.pivotUtilities.naturalSort(a[index], b[index])\r\n            \r\n        valuePredicate: (sortItem, lastKeyIndex) =>\r\n            value = (r, c) => @getAggregator(r, c).value()\r\n            colKey = sortItem.value \r\n            (a, b) ->\r\n                if sortItem.direction\r\n                    return $.pivotUtilities.naturalSort(value(a[0..lastKeyIndex], colKey), value(b[0..lastKeyIndex], colKey))\r\n                else\r\n                    return -$.pivotUtilities.naturalSort(value(a[0..lastKeyIndex], colKey), value(b[0..lastKeyIndex], colKey))\r\n            \r\n        defaultPredicate: (attrGroup, rowAttrIndex, callbacks) =>\r\n            (a, b) ->\r\n                for attr in attrGroup\r\n                    i = rowAttrIndex[attr]\r\n                    result = $.pivotUtilities.naturalSort(a[i], b[i], attr, callbacks)\r\n                    return result if result != 0\r\n                return 0\r\n            \r\n        multiplePredicatesSort: (predicates, callbacks) =>\r\n            (a, b) ->\r\n                for predicate in predicates\r\n                    result = predicate(a, b, callbacks)\r\n                    return result if result != 0\r\n                return 0\r\n\r\n        buildRowAttrsIndex = (attrGroups) =>\r\n            i = 0\r\n            index = {}\r\n            for attrGroup in attrGroups\r\n                for attr in attrGroup\r\n                    index[attr] = i\r\n                    ++i\r\n            return index        \r\n                \r\n        convertAttrsToGroups = (attrs, splitPositions) =>\r\n            attrGroups = []\r\n            prev = 0\r\n            for pos in splitPositions\r\n                attrGroups.push(attrs[prev..pos])\r\n                prev = pos + 1\r\n            return attrGroups\r\n            \r\n    $.pivotUtilities.SubtotalPivotData = SubtotalPivotData\r\n\r\n\r\n    SubtotalRenderer = (pivotData, opts, clusterize) ->\r\n        defaults =\r\n            table: clickCallback: null\r\n            localeStrings: totals: \"Totals\", subtotalOf: \"Subtotal of\"\r\n            arrowCollapsed: \"\\u25B6\"\r\n            arrowExpanded: \"\\u25E2\"\r\n            rowSubtotalDisplay:\r\n                displayOnTop: true\r\n                collapseAt: 99999\r\n                hideOnExpand: false\r\n                disableExpandCollapse: false\r\n            colSubtotalDisplay:\r\n                displayOnTop: true\r\n                collapseAt: 99999\r\n                hideOnExpand: false\r\n                disableExpandCollapse: false\r\n        opts = $.extend true, {}, defaults, opts\r\n\r\n        opts.rowSubtotalDisplay.collapseAt = opts.collapseRowsAt if typeof opts.rowSubtotalDisplay.collapseAt isnt 'undefined' and opts.collapseRowsAt isnt null\r\n        opts.rowSubtotalDisplay.splitPositions = (i for i in [0...pivotData.rowAttrs.length]) if not opts.rowSubtotalDisplay.splitPositions?\r\n\r\n        opts.colSubtotalDisplay.collapseAt = opts.collapseColsAt if typeof opts.colSubtotalDisplay.collapseAt isnt 'undefined' and opts.collapseColsAt isnt null\r\n        opts.colSubtotalDisplay.splitPositions = (i for i in [0...pivotData.colAttrs.length]) if not opts.colSubtotalDisplay.splitPositions?\r\n\r\n        colAttrs = pivotData.colAttrs\r\n        rowAttrs = pivotData.rowAttrs\r\n        rowKeys = pivotData.getRowKeys()\r\n        colKeys = pivotData.getColKeys()\r\n        tree = pivotData.tree\r\n        callbacks = pivotData.callbacks\r\n        rowTotals = pivotData.rowTotals\r\n        colTotals = pivotData.colTotals\r\n        allTotal = pivotData.allTotal\r\n\r\n        classRowHide = \"rowhide\"\r\n        classRowShow = \"rowshow\"\r\n        classColHide = \"colhide\"\r\n        classColShow = \"colshow\"\r\n        clickStatusExpanded = \"expanded\"\r\n        clickStatusCollapsed = \"collapsed\"\r\n        classExpanded = \"expanded\"\r\n        classCollapsed = \"collapsed\"\r\n        classZoom = \"zoom\"\r\n        classRowExpanded = \"rowexpanded\"\r\n        classRowCollapsed = \"rowcollapsed\"\r\n        classColExpanded = \"colexpanded\"\r\n        classColCollapsed = \"colcollapsed\"\r\n        arrowExpanded = opts.arrowExpanded\r\n        arrowCollapsed = opts.arrowCollapsed\r\n        \r\n        rowSplitPositions = opts.rowSubtotalDisplay.splitPositions\r\n        rowGroups = pivotData.rowAttrGroups\r\n        \r\n        rowArrowsPadding = 5\r\n        rowArrowsLevelPadding = 10\r\n        \r\n        hideColAxisHeadersColumn = opts.hideColAxisHeadersColumn ? false\r\n        hideColsTotalRow = opts.hideColsTotalsRow ? false\r\n        hideRowsTotalsCol = opts.hideRowsTotalsCol ? false\r\n        \r\n        emptyTopAttrTH = null\r\n        \r\n        # Based on http://stackoverflow.com/questions/195951/change-an-elements-class-with-javascript -- Begin\r\n        hasClass = (element, className) ->\r\n            regExp = new RegExp \"(?:^|\\\\s)\" + className + \"(?!\\\\S)\", \"g\"\r\n            element.className.match(regExp) isnt null\r\n\r\n        removeClass = (element, className) ->\r\n            for name in className.split \" \"\r\n                regExp = new RegExp \"(?:^|\\\\s)\" + name + \"(?!\\\\S)\", \"g\"\r\n                element.className = element.className.replace regExp, ''\r\n\r\n        addClass = (element, className) ->\r\n            for name in className.split \" \"\r\n                element.className += (\" \" + name) if not hasClass element, name\r\n\r\n        replaceClass = (element, replaceClassName, byClassName) ->\r\n            removeClass element, replaceClassName\r\n            addClass element, byClassName\r\n        # Based on http://stackoverflow.com/questions/195951/change-an-elements-class-with-javascript -- End \r\n\r\n        createElement = (elementType, className, attributes, eventHandlers) ->\r\n            e = document.createElement elementType\r\n            e.className = className if className?\r\n            e.setAttribute attr, val for own attr, val of attributes if attributes?\r\n            e.addEventListener event, handler for own event, handler of eventHandlers if eventHandlers?\r\n            return e\r\n\r\n        createValueTD = (value, rowKey, colKey, aggregator, className, attributes, eventHandlers) ->\r\n            td = createElement \"td\", className, attributes, eventHandlers\r\n            td.onmousedown = (event) -> if event.detail > 1 then event.preventDefault() if callbacks?\r\n            td.ondblclick = (event) -> callbacks.valueCellDblClickHandler event, td, rowKey, colKey if callbacks?\r\n            renderValueCell td, value, rowKey, colKey, aggregator\r\n            return td\r\n\r\n        renderValueCell = (td, value, rowKey, colKey, aggregator) ->\r\n            if callbacks?\r\n                callbacks.renderValueCell td, value, rowKey, colKey\r\n            else\r\n                td.textContent = aggregator.format(value)\r\n        \r\n        createArrowAndTextDivs = (th, arrowClass, textClass) ->\r\n            wrapperDiv = createElement \"div\", \"wrapperDiv fill-parent-perc\"\r\n            th.append wrapperDiv\r\n\r\n            arrowDiv = createElement \"div\", arrowClass\r\n            wrapperDiv.appendChild arrowDiv\r\n            th.arrowDiv = arrowDiv\r\n\r\n            textDiv = createElement \"div\", textClass\r\n            wrapperDiv.appendChild textDiv\r\n            th.textDiv = textDiv;\r\n                \r\n        createColAxisHeaderTH = (attr, className, textContent, isExpanded, attributes) ->\r\n            th = createElement \"th\", className, attributes\r\n            textElement = th\r\n            if isExpanded?\r\n                createArrowAndTextDivs th, \"axisHeaderArrowDiv\", \"axisHeaderTextDiv\"\r\n                textElement = th.textDiv\r\n\r\n            textElement.onmousedown = (event) -> if event.detail > 1 then event.preventDefault() if callbacks?\r\n            textElement.ondblclick = (event) -> callbacks.colAxisHeaderDblClickHandler event, textElement, attr if callbacks?\r\n            renderColAxisHeader th, textContent, attr, isExpanded, false\r\n            return th\r\n            \r\n        renderColAxisHeader = (th, textContent, attr, isExpanded, arrowOnly) ->\r\n            if isExpanded?\r\n                if callbacks?\r\n                    callbacks.renderAxisHeaderCell th.arrowDiv, textContent, attr, isExpanded, true\r\n                    if not arrowOnly\r\n                        callbacks.renderAxisHeaderCell th.textDiv, textContent, attr, isExpanded, false\r\n                else\r\n                    th.arrowDiv.textContent = arrowText isExpanded\r\n                    if not arrowOnly\r\n                        th.textDiv.textContent = textContent\r\n            else if callbacks?                     \r\n                callbacks.renderAxisHeaderCell th, textContent, attr, isExpanded, false\r\n            else\r\n                th.textContent = textContent\r\n\r\n        createRowAxisHeaderTH = (attr, className, textContent, isArrow, isExpanded, attributes) ->\r\n            th = createElement \"th\", className, attributes\r\n            if not isArrow\r\n                th.onmousedown = (event) -> if event.detail > 1 then event.preventDefault() if callbacks?\r\n                th.ondblclick = (event) -> callbacks.rowAxisHeaderDblClickHandler event, th, attr if callbacks?\r\n            renderRowAxisHeader th, textContent, attr, isArrow, isExpanded\r\n            return th\r\n            \r\n        renderRowAxisHeader = (th, textContent, attr, isArrow, isExpanded) ->\r\n            if callbacks?\r\n                callbacks.renderAxisHeaderCell th, textContent, attr, isExpanded, isArrow\r\n            else\r\n                th.textContent = if isArrow then arrowText isExpanded else textContent\r\n                \r\n        createRowAttrHeaderTH = (rowKey, cellAttr, className, value, isArrow, isExpanded, isLastChildList, attributes) ->\r\n            th = createElement \"th\", className, attributes\r\n            if not isArrow\r\n                th.onmousedown = (event) -> if event.detail > 1 then event.preventDefault() if callbacks?\r\n                th.onclick = (event) -> callbacks.rowAttrHeaderClickHandler event, th, rowKey, cellAttr if callbacks?\r\n            renderRowAttrHeader th, value, rowKey, cellAttr, isArrow, isExpanded, isLastChildList\r\n            return th\r\n\r\n        renderRowAttrHeader = (th, value, rowKey, cellAttr, isArrow, isExpanded, isLastChildList) ->\r\n            if callbacks?\r\n                callbacks.renderRowAttrHeaderCell th, value, rowKey, cellAttr, isExpanded, isArrow, isLastChildList\r\n            else \r\n                th.textContent = if isArrow then arrowText isExpanded else value\r\n            \r\n        createColAttrHeaderTH = (colKey, isSubtotal, className, value, isExpanded, colsData, attributes) ->\r\n            th = createElement \"th\", className, attributes\r\n            textElement = th\r\n            if isExpanded?\r\n                createArrowAndTextDivs th, \"colAttrHeaderArrowDiv\", \"colAttrHeaderTextDiv\"\r\n                textElement = th.textDiv\r\n\r\n            textElement.onmousedown = (event) -> if event.detail > 1 then event.preventDefault() if callbacks?\r\n            textElement.onclick = (event) -> callbacks.colAttrHeaderClickHandler event, textElement, colKey, isSubtotal if callbacks?\r\n            if colKey.length == colAttrs.length or isSubtotal or colKey.length == 0\r\n                colsData.push { width : getColumnWidth(true, colKey, null, false), colnode : attributes[\"data-colnode\"] }      \r\n            renderColAttrHeader th, value, colKey, isSubtotal, isExpanded, false\r\n            return th\r\n\r\n        renderColAttrHeader = (th, value, colKey, isSubtotal, isExpanded, arrowOnly) ->\r\n            if isExpanded?\r\n                if callbacks?\r\n                    callbacks.renderColAttrHeaderCell th.arrowDiv, value, colKey, isSubtotal, isExpanded, true\r\n                    if not arrowOnly\r\n                        callbacks.renderColAttrHeaderCell th.textDiv, value, colKey, isSubtotal, isExpanded, false\r\n                else\r\n                    th.arrowDiv.textContent = arrowText isExpanded\r\n                    if not arrowOnly\r\n                        th.textDiv.textContent = value if not arrowOnly\r\n            else if callbacks?\r\n                callbacks.renderColAttrHeaderCell th, value, colKey, isSubtotal, isExpanded, false\r\n            else\r\n                th.textContent = value\r\n        \r\n        arrowText = (isExpanded) ->\r\n          if isExpanded == true\r\n              return \" #{arrowExpanded} \"\r\n          else if isExpanded == false\r\n              return \" #{arrowCollapsed} \"\r\n          else\r\n              return \"\"\r\n              \r\n        setAttributes = (e, attrs) ->\r\n            e.setAttribute a, v for own a, v of attrs\r\n\r\n        processColKeys = (colAttrs, keysArr) ->\r\n            lastIdx = keysArr[0].length-1\r\n            headers = children: []\r\n            row = 0\r\n            keysArr.reduce(\r\n                (val0, k0) => \r\n                    col = 0\r\n                    k0.reduce(\r\n                        (acc, curVal, curIdx) =>\r\n                            curValString = if callbacks then callbacks.formatValue(colAttrs[curIdx], curVal, false) else curVal\r\n                            if not acc[curValString]\r\n                                key = k0.slice 0, col+1\r\n                                acc[curValString] =\r\n                                    row: row\r\n                                    col: col\r\n                                    descendants: 0\r\n                                    children: []\r\n                                    value: curVal\r\n                                    key: key \r\n                                    flatKey: (if callbacks then callbacks.formatArray(colAttrs, key) else key).join String.fromCharCode(0)\r\n                                    firstLeaf: null \r\n                                    leaves: 0\r\n                                    parent: if col isnt 0 then acc else null\r\n                                    childrenSpan: 0\r\n                                acc.children.push curValString\r\n                            if col > 0 \r\n                                acc.descendants++\r\n                            col++\r\n                            if curIdx == lastIdx\r\n                                node = headers\r\n                                for i in [0..lastIdx-1] when lastIdx > 0\r\n                                    index = if callbacks then callbacks.formatValue(colAttrs[i], k0[i]) else k0[i]\r\n                                    node[index].leaves++\r\n                                    if not node[index].firstLeaf\r\n                                        node[index].firstLeaf = acc[curValString]\r\n                                    node = node[index]\r\n                                return headers\r\n                            return acc[curValString]\r\n                        headers)\r\n                    row++\r\n                    return headers\r\n                headers)\r\n            return headers\r\n\r\n        processRowKeys = (rowAttrs, keysArr, className, splitPositions) ->\r\n            lastIdx = keysArr[0].length-1\r\n            headers = children: []\r\n            row = 0\r\n            keysArr.reduce(\r\n                (val0, k0) => \r\n                    col = 0\r\n                    curElement = []\r\n                    curColumns = []\r\n                    k0.reduce(\r\n                        (acc, curVal, curIdx) => \r\n                            curElement.push curVal\r\n                            curColumns.push rowAttrs[curIdx]\r\n                            if splitPositions.indexOf(curIdx) != -1\r\n                                flatCurElement = (if callbacks then callbacks.formatArray(curColumns, curElement) else curElement).join String.fromCharCode(0)\r\n                                if not acc[flatCurElement] \r\n                                    key = k0.slice 0, curIdx+1\r\n                                    acc[flatCurElement] =\r\n                                        row: row\r\n                                        col: col\r\n                                        descendants: 0\r\n                                        children: []\r\n                                        values: curElement\r\n                                        text: flatCurElement\r\n                                        key: key \r\n                                        flatKey: (if callbacks then callbacks.formatArray(rowAttrs, key) else key).join String.fromCharCode(0)\r\n                                        firstLeaf: null \r\n                                        leaves: 0\r\n                                        parent: if col isnt 0 then acc else null\r\n                                        childrenSpan: 0\r\n                                    acc.children.push flatCurElement\r\n                                if col > 0 \r\n                                    acc.descendants++\r\n                                col++\r\n                                if curIdx == lastIdx\r\n                                    node = acc\r\n                                    while node?\r\n                                        node.leaves++\r\n                                        if not node.firstLeaf \r\n                                            node.firstLeaf = acc[flatCurElement]\r\n                                        node = node.parent\r\n                                    return headers \r\n                                curElement = []\r\n                                curColumns = []\r\n                                return acc[flatCurElement]\r\n                            else \r\n                                return acc\r\n                        headers)\r\n                    row++\r\n                    return headers\r\n                headers)\r\n            return headers\r\n\r\n        buildColAxisHeader = (axisHeaders, index, attrs, opts, disabledArrow) ->\r\n            ah =\r\n                text: attrs[index]\r\n                expandedCount: 0\r\n                expandables: 0\r\n                attrHeaders: []\r\n                clickStatus: clickStatusExpanded\r\n                onClick: collapseColAxis\r\n\r\n            isExpanded = true if not disabledArrow    \r\n            hClass = classExpanded\r\n            if index >= opts.collapseAt\r\n                isExpanded = false\r\n                hClass = classCollapsed\r\n                ah.clickStatus = clickStatusCollapsed\r\n                ah.onClick = expandAxis\r\n            \r\n            if not hideColAxisHeadersColumn    \r\n                ah.th = createColAxisHeaderTH ah.text, \"pvtAxisLabel #{hClass}\", ah.text, isExpanded \r\n                if not disabledArrow\r\n                    ah.th.arrowDiv.onclick = (event) ->\r\n                        event = event || window.event\r\n                        ah.onClick axisHeaders, index, attrs, opts\r\n            axisHeaders.ah.push ah\r\n            return ah \r\n\r\n        arrowColumnIsNeeded = () ->\r\n            return rowGroups.length > 1\r\n\r\n        buildRowAxisHeader = (axisHeaders, index, attrs, opts, disabledArrow) ->\r\n            ah =\r\n                text: \"\"\r\n                values: []\r\n                expandedCount: 0\r\n                expandables: 0\r\n                attrHeaders: []\r\n                clickStatus: clickStatusExpanded\r\n                onClick: collapseRowAxis\r\n                ths: []\r\n\r\n            isExpanded = true if not disabledArrow    \r\n            hClass = classExpanded\r\n            if index >= opts.collapseAt\r\n                isExpanded = false\r\n                hClass = classCollapsed\r\n                ah.clickStatus = clickStatusCollapsed\r\n                ah.onClick = expandAxis\r\n\r\n            for attr, i in rowGroups[index] \r\n                if i == 0 and arrowColumnIsNeeded()\r\n                    zoomClassPart = if isExpanded? then classZoom else \"\"\r\n                    arrowTh = createRowAxisHeaderTH attr, \"pvtAxisLabel #{hClass} #{zoomClassPart}\", \"\", true, isExpanded, {style: \"padding-left: #{rowArrowsPadding + index * rowArrowsLevelPadding}px;\"}\r\n                    ah.arrowTh = arrowTh\r\n                    ah.ths.push arrowTh \r\n                th = createRowAxisHeaderTH attr, \"pvtAxisLabel #{hClass}\", attr, false          \r\n                ah.ths.push th\r\n                ah.values.push attr\r\n\r\n            flatText = rowGroups[index].join String.fromCharCode(0)\r\n            ah.text = flatText \r\n            if not disabledArrow \r\n                ah.arrowTh.onclick = (event) ->\r\n                    event = event || window.event\r\n                    ah.onClick axisHeaders, index, attrs, opts\r\n\r\n            axisHeaders.ah.push ah\r\n            return ah \r\n\r\n        buildAxisHeaders = (thead, rowAttrs, colAttrs, opts) ->\r\n            colAxisHeaders =\r\n                collapseAttrHeader: collapseCol\r\n                expandAttrHeader: expandCol\r\n                ah: []\r\n\r\n            rowAxisHeaders =\r\n                collapseAttrHeader: collapseRow\r\n                expandAttrHeader: expandRow\r\n                ah: []\r\n\r\n            rowGroupsNumber = rowGroups.length\r\n            longestRowGroupLength = longestGroupLength rowGroups\r\n\r\n            rowsNumber = Math.max rowGroupsNumber, colAttrs.length \r\n\r\n            trs = []\r\n            for row in [0...rowsNumber]\r\n                tr = createElement \"tr\"\r\n                trs.push tr\r\n                thead.appendChild tr\r\n                if row + rowGroupsNumber >= rowsNumber\r\n                    curGroup = row - (rowsNumber - rowGroupsNumber)\r\n                    disabled = curGroup == rowGroupsNumber - 1\r\n                    ah = buildRowAxisHeader rowAxisHeaders, curGroup, rowAttrs, opts.rowSubtotalDisplay, disabled \r\n                    for th in ah.ths\r\n                        tr.appendChild th  \r\n                    ah.tr = tr\r\n                    groupLen = rowGroups[curGroup].length   \r\n                    if groupLen < longestRowGroupLength\r\n                        tr.appendChild createElement \"th\", \"pvtEmptyHeader\", {colspan: longestRowGroupLength - groupLen}\r\n                else if row == 0 and longestRowGroupLength > 0\r\n                    tr.appendChild createElement \"th\", \"pvtEmptyHeader\", {colspan: longestRowGroupLength + (if arrowColumnIsNeeded() then 1 else 0), rowspan: rowsNumber - rowGroupsNumber}\r\n\r\n                if row + colAttrs.length >= rowsNumber\r\n                    curCol = row - (rowsNumber - colAttrs.length)\r\n                    disabled = not colSubtotalIsEnabled opts.colSubtotalDisplay, curCol\r\n                    ah = buildColAxisHeader colAxisHeaders, curCol, colAttrs, opts.colSubtotalDisplay, disabled\r\n                    tr.appendChild ah.th if not hideColAxisHeadersColumn\r\n                    ah.tr = tr\r\n                else if row == 0 and colAttrs.length > 0 and not hideColAxisHeadersColumn\r\n                    tr.appendChild createElement \"th\", \"pvtEmptyHeader\", {rowspan: rowsNumber - colAttrs.length}\r\n\r\n            return [colAxisHeaders, rowAxisHeaders, trs]\r\n\r\n        longestGroupLength = (splitGroups) ->\r\n            len = 0\r\n            for group in splitGroups\r\n                len = Math.max len, group.length \r\n            return len\r\n\r\n        colSubtotalIsEnabled = (subtotalOpts, index) ->\r\n            splitPositions = subtotalOpts.splitPositions\r\n            if index == splitPositions[splitPositions.length - 1] or subtotalOpts.disableExpandCollapse or subtotalOpts.disableSubtotal\r\n                return false\r\n            return splitPositions.indexOf(index) != -1    \r\n\r\n        buildColHeader = (callbacks, axisHeaders, attrHeaders, h, rowAttrs, colAttrs, node, opts, colsData) ->\r\n            # DF Recurse\r\n            buildColHeader callbacks, axisHeaders, attrHeaders, h[chKey], rowAttrs, colAttrs, node, opts, colsData for chKey in h.children\r\n            # Process\r\n            ah = axisHeaders.ah[h.col]\r\n            ah.attrHeaders.push h\r\n\r\n            h.node = node.counter\r\n            h.onClick = collapseCol\r\n\r\n            isExpanded = true if colSubtotalIsEnabled(opts.colSubtotalDisplay, h.col) and h.children.length isnt 0\r\n            h.th = createColAttrHeaderTH h.key, false, \"pvtColLabel #{classColShow} col#{h.row} colcol#{h.col} #{classColExpanded}\", h.value, isExpanded, colsData,\r\n                \"data-colnode\": h.node    \r\n                \"colspan\": h.childrenSpan if h.children.length isnt 0\r\n                \r\n\r\n            if h.children.length isnt 0 and colSubtotalIsEnabled opts.colSubtotalDisplay, h.col\r\n                ah.expandables++\r\n                ah.expandedCount += 1\r\n                h.th.colSpan++ if not opts.colSubtotalDisplay.hideOnExpand\r\n                if not opts.colSubtotalDisplay.disableExpandCollapse\r\n                    h.th.arrowDiv.onclick = (event) ->\r\n                        event = event || window.event\r\n                        h.onClick axisHeaders, h, opts.colSubtotalDisplay \r\n                h.sTh = createColAttrHeaderTH h.key, true, \"pvtColLabelFiller #{classColShow} col#{h.row} colcol#{h.col} #{classColExpanded}\", \"\", undefined, colsData, \r\n                    \"data-colnode\": h.node\r\n                    \"rowspan\":  colAttrs.length - h.col - 1\r\n                replaceClass h.sTh, classColShow, classColHide if opts.colSubtotalDisplay.hideOnExpand\r\n                h[h.children[0]].tr.appendChild h.sTh\r\n\r\n            h.parent?.childrenSpan += h.th.colSpan\r\n\r\n            h.clickStatus = clickStatusExpanded\r\n            ah.tr.appendChild h.th\r\n            h.tr = ah.tr\r\n            attrHeaders.push h\r\n            node.counter++ \r\n\r\n\r\n        buildRowTotalsHeader = (tr, span, colsWidth) ->\r\n            th = createColAttrHeaderTH [], true, \"pvtTotalLabel rowTotal\", \"\", undefined, colsWidth,  \r\n                rowspan: span\r\n            tr.appendChild th\r\n\r\n        buildRowHeader = (tbody, axisHeaders, attrHeaders, h, rowAttrs, colAttrs, node, isLastChildList, opts) ->\r\n            for i in [0...h.children.length]\r\n                chKey = h.children[i]\r\n                isLastChildList.push i == h.children.length - 1\r\n                buildRowHeader tbody, axisHeaders, attrHeaders, h[chKey], rowAttrs, colAttrs, node, isLastChildList, opts\r\n                isLastChildList.pop()\r\n            h.isLastChildList = isLastChildList[..]\r\n            ah = axisHeaders.ah[h.col]\r\n            ah.attrHeaders.push h\r\n\r\n            h.node = node.counter\r\n            h.onClick = collapseRow\r\n            firstChild = h[h.children[0]] if h.children.length isnt 0\r\n\r\n            colSpan = 1 + longestGroupLength(rowGroups) - h.values.length\r\n            colSpan += 1 if colAttrs.length > 0 and not hideColAxisHeadersColumn\r\n            h.tr = createElement \"tr\", \"row#{h.row}\"\r\n            if h.children.length is 0\r\n                tbody.appendChild h.tr\r\n            else\r\n                tbody.insertBefore h.tr, firstChild.tr\r\n\r\n            h.ths = []\r\n\r\n            if h.children.length isnt 0\r\n                isExpanded = true\r\n                arrowOpts = {style: \"padding-left: #{rowArrowsPadding + h.col * rowArrowsLevelPadding}px;\"}\r\n            else\r\n                arrowOpts = {}\r\n            \r\n            zoomClassPart = if isExpanded? then classZoom else \"\"\r\n            arrowClass = \"pvtRowLabel #{classRowShow} row#{h.row} rowcol#{h.col} #{classRowExpanded} #{zoomClassPart}\"\r\n            h.arrowTh = createRowAttrHeaderTH h.key, undefined, arrowClass, \"\", true, isExpanded, h.isLastChildList, arrowOpts\r\n            if arrowColumnIsNeeded()\r\n                h.ths.push h.arrowTh\r\n                h.tr.appendChild h.arrowTh\r\n            \r\n            for i in [0...h.values.length]\r\n                thClass = \"pvtRowLabel #{classRowShow} row#{h.row} rowcol#{h.col} #{classRowExpanded}\"\r\n                th = createRowAttrHeaderTH h.key, rowGroups[h.col][i], thClass, h.values[i], false, undefined, h.isLastChildList, \r\n                    \"data-rownode\": h.node\r\n                th.colSpan = colSpan if i+1 == h.values.length\r\n                \r\n                h.ths.push th\r\n                h.tr.appendChild th\r\n\r\n            if h.children.length isnt 0 \r\n                ++ah.expandedCount\r\n                ++ah.expandables\r\n                if not opts.rowSubtotalDisplay.disableExpandCollapse and arrowColumnIsNeeded()\r\n                    h.arrowTh.onclick = (event) ->\r\n                        event = event || window.event\r\n                        h.onClick axisHeaders, h, opts.rowSubtotalDisplay\r\n\r\n                if not opts.rowSubtotalDisplay.displayOnTop\r\n                    h.sTr = createElement \"tr\", \"row#{h.row}\"\r\n                    tbody.appendChild h.sTr\r\n\r\n            h.parent?.childrenSpan += 1\r\n\r\n            h.clickStatus = clickStatusExpanded\r\n            attrHeaders.push h\r\n            node.counter++\r\n\r\n        getTableEventHandlers = (value, rowKey, colKey, rowAttrs, colAttrs, opts) ->\r\n            return if not opts.table?.eventHandlers\r\n            eventHandlers = {}\r\n            for own event, handler of opts.table.eventHandlers\r\n                filters = {}\r\n                filters[attr] = colKey[i] for own i, attr of colAttrs when colKey[i]?\r\n                filters[attr] = rowKey[i] for own i, attr of rowAttrs when rowKey[i]?\r\n                eventHandlers[event] = (e) -> handler(e, value, filters, pivotData)\r\n            return eventHandlers\r\n\r\n        buildValues = (scrollDiv, tbody, colAttrHeaders, rowAttrHeaders, rowAttrs, colAttrs, clusterize, opts) ->\r\n            if clusterize\r\n                addClass scrollDiv, \"clusterize-scroll\"\r\n                addClass tbody, \"clusterize-content\"\r\n                c = new Clusterize(\r\n                    rows: []\r\n                    scrollElem: scrollDiv\r\n                    contentElem: tbody\r\n                );\r\n                clusterizedRowsDiv = createElement 'div'\r\n                setTimeout ->\r\n                    fillData(scrollDiv, tbody, colAttrHeaders, rowAttrHeaders, rowAttrs, colAttrs, clusterize, c, clusterizedRowsDiv, opts, 0)\r\n                , 0\r\n            else\r\n                fillData(scrollDiv, tbody, colAttrHeaders, rowAttrHeaders, rowAttrs, colAttrs, clusterize, c, null, opts, 0)\r\n\r\n        fillData = (scrollDiv, tbody, colAttrHeaders, rowAttrHeaders, rowAttrs, colAttrs, clusterize, c, clusterizedRowsDiv, opts, start) ->\r\n            finish = 0\r\n            for i in [start...rowAttrHeaders.length]\r\n                finish = i\r\n                rh = rowAttrHeaders[i]\r\n                if rh\r\n                    rCls = \"pvtVal row#{rh.row} rowcol#{rh.col} #{classRowExpanded}\"\r\n                    if rh.children.length > 0\r\n                        rCls += \" pvtRowSubtotal\"\r\n                        rCls += if opts.rowSubtotalDisplay.hideOnExpand then \" #{classRowHide}\" else \"  #{classRowShow}\"\r\n                    else\r\n                        rCls += \" #{classRowShow}\"\r\n                    tr = if rh.sTr then rh.sTr else rh.tr\r\n                    for ch in colAttrHeaders when ch.col is colAttrs.length-1 or (ch.children.length isnt 0 and colSubtotalIsEnabled opts.colSubtotalDisplay, ch.col)\r\n                        aggregator = tree[rh.flatKey][ch.flatKey] ? { value: (-> null), format: -> \"\" }\r\n                        val = aggregator.value()\r\n                        cls = \" #{rCls} col#{ch.row} colcol#{ch.col} #{classColExpanded}\"\r\n                        if ch.children.length > 0\r\n                            cls += \" pvtColSubtotal\"\r\n                            cls += if opts.colSubtotalDisplay.hideOnExpand then \" #{classColHide}\" else \" #{classColShow}\"\r\n                        else\r\n                            cls += \" #{classColShow}\"\r\n                        td = createValueTD val, rh.key, ch.key, aggregator, cls,\r\n                            \"data-value\": val\r\n                            \"data-rownode\": rh.node\r\n                            \"data-colnode\": ch.node,\r\n                            getTableEventHandlers val, rh.key, ch.key, rowAttrs, colAttrs, opts\r\n\r\n                        tr.appendChild td\r\n\r\n\r\n                    if not hideRowsTotalsCol\r\n                        # buildRowTotal\r\n                        totalAggregator = rowTotals[rh.flatKey]\r\n                        val = totalAggregator.value()\r\n                        td = createValueTD val, rh.key, [], totalAggregator, \"pvtTotal rowTotal #{rCls}\",\r\n                            \"data-value\": val\r\n                            \"data-row\": \"row#{rh.row}\"\r\n                            \"data-rowcol\": \"col#{rh.col}\"\r\n                            \"data-rownode\": rh.node,\r\n                            getTableEventHandlers val, rh.key, [], rowAttrs, colAttrs, opts\r\n                        tr.appendChild td\r\n                    if clusterize\r\n                        c.append([tr.outerHTML])\r\n                        clusterizedRowsDiv.appendChild tr\r\n\r\n                if clusterize && ((Date.now() - startTime) > 100) #100ms check\r\n                    break\r\n\r\n            setTimeout ->\r\n                if (finish + 1) < rowAttrHeaders.length\r\n                    fillData(scrollDiv, tbody, colAttrHeaders, rowAttrHeaders, rowAttrs, colAttrs, clusterize, c, clusterizedRowsDiv, opts, finish + 1)\r\n                else if callbacks then callbacks.setClusterizedRowsDiv(clusterizedRowsDiv)\r\n            , 0\r\n\r\n        buildColTotalsHeader = (rowHeadersColumns, colAttrs) ->\r\n            tr = createElement \"tr\"\r\n            colspan = rowHeadersColumns + (if colAttrs.length == 0 or hideColAxisHeadersColumn then 0 else 1) \r\n            if colspan > 0\r\n                if arrowColumnIsNeeded()\r\n                    arrowTh = createRowAttrHeaderTH [], undefined, \"pvtTotalLabel colTotal\", \"\", true, undefined, []\r\n                    tr.appendChild arrowTh\r\n                th = createRowAttrHeaderTH [], undefined, \"pvtTotalLabel colTotal\", \"\", false, undefined, [], {colspan: colspan}\r\n                tr.appendChild th\r\n            return tr\r\n\r\n        buildColTotals = (tr, attrHeaders, rowAttrs, colAttrs, opts) ->\r\n            for h in attrHeaders when  h.col is colAttrs.length-1 or (h.children.length isnt 0 and colSubtotalIsEnabled opts.colSubtotalDisplay, h.col)\r\n                clsNames = \"pvtVal pvtTotal colTotal #{classColExpanded} col#{h.row} colcol#{h.col}\"\r\n                if h.children.length isnt 0\r\n                    clsNames += \" pvtColSubtotal\" \r\n                    clsNames += if opts.colSubtotalDisplay.hideOnExpand then \" #{classColHide}\" else \" #{classColShow}\"\r\n                else\r\n                    clsNames += \" #{classColShow}\"\r\n                totalAggregator = colTotals[h.flatKey]\r\n                val = totalAggregator.value()\r\n                td = createValueTD val, [], h.key, totalAggregator, clsNames, \r\n                    \"data-value\": val\r\n                    \"data-for\": \"col#{h.col}\"\r\n                    \"data-colnode\": \"#{h.node}\",\r\n                    getTableEventHandlers val, [], h.key, rowAttrs, colAttrs, opts\r\n                tr.appendChild td\r\n\r\n        buildGrandTotal = (tbody, tr, rowAttrs, colAttrs, opts) ->\r\n            totalAggregator = allTotal\r\n            val = totalAggregator.value()\r\n            td = createValueTD val, [], [], totalAggregator, \"pvtGrandTotal\", \r\n                {\"data-value\": val},\r\n                getTableEventHandlers val, [], [], rowAttrs, colAttrs, opts\r\n            tr.appendChild td\r\n\r\n        collapseColAxisHeaders = (axisHeaders, col, opts) ->\r\n            for i in [col..axisHeaders.ah.length-2]\r\n                if colSubtotalIsEnabled opts, i\r\n                    ah = axisHeaders.ah[i]\r\n                    replaceClass ah.th, classExpanded, classCollapsed\r\n                    renderColAxisHeader ah.th, ah.text, ah.text, false, true\r\n                    ah.clickStatus = clickStatusCollapsed\r\n                    ah.onClick = expandAxis\r\n\r\n        collapseRowAxisHeaders = (axisHeaders, row, opts) ->\r\n            for i in [row..axisHeaders.ah.length-2]\r\n                ah = axisHeaders.ah[i]\r\n                for th in ah.ths\r\n                    replaceClass th, classExpanded, classCollapsed\r\n                renderRowAxisHeader ah.arrowTh, \"\", ah.values[0], true, false      \r\n                ah.clickStatus = clickStatusCollapsed\r\n                ah.onClick = expandAxis\r\n\r\n        adjustColAxisHeader = (axisHeaders, col, opts) ->\r\n            if not hideColAxisHeadersColumn\r\n                ah = axisHeaders.ah[col]\r\n                if ah.expandedCount is 0\r\n                    collapseColAxisHeaders axisHeaders, col, opts\r\n                else if ah.expandedCount is ah.expandables\r\n                    replaceClass ah.th, classCollapsed, classExpanded\r\n                    renderColAxisHeader ah.th, ah.text, ah.text, true, true\r\n                    ah.clickStatus = clickStatusExpanded\r\n                    ah.onClick = collapseColAxis\r\n\r\n        adjustRowAxisHeader = (axisHeaders, row, opts) ->\r\n            ah = axisHeaders.ah[row]\r\n            if ah.expandedCount is 0\r\n                collapseRowAxisHeaders axisHeaders, row, opts\r\n            else if ah.expandedCount is ah.expandables\r\n                for th in ah.ths\r\n                    replaceClass th, classCollapsed, classExpanded\r\n                renderRowAxisHeader ah.arrowTh, \"\", ah.values[0], true, true\r\n                ah.clickStatus = clickStatusExpanded\r\n                ah.onClick = collapseRowAxis\r\n\r\n        hideChildCol = (ch) ->\r\n            outerDiv = $(ch.th).closest 'div.subtotalouterdiv'\r\n            outerDiv\r\n                .find \"tbody tr td[data-colnode=\\\"#{ch.node}\\\"], th[data-colnode=\\\"#{ch.node}\\\"]\" \r\n                .removeClass classColShow \r\n                .addClass classColHide\r\n\r\n            col = outerDiv.find \"colgroup col[data-colnode=\\\"#{ch.node}\\\"]\"\r\n            col?.removeClass classColShow\r\n            col?.addClass classColHide\r\n            \r\n        collapseHiddenColSubtotal = (h, opts) ->\r\n            $(h.th).closest 'div.subtotalouterdiv'\r\n                .find \"tbody tr td[data-colnode=\\\"#{h.node}\\\"], th[data-colnode=\\\"#{h.node}\\\"]\" \r\n                .removeClass classColExpanded\r\n                .addClass classColCollapsed\r\n            if h.children.length isnt 0\r\n                renderColAttrHeader h.th, h.value, h.key, false, false, true\r\n            h.th.colSpan = 1\r\n            \r\n        collapseShowColSubtotal = (h, opts) ->\r\n            outerDiv = $(h.th).closest 'div.subtotalouterdiv'\r\n            outerDiv\r\n                .find \"tbody tr td[data-colnode=\\\"#{h.node}\\\"], th[data-colnode=\\\"#{h.node}\\\"]\" \r\n                .removeClass classColExpanded\r\n                .addClass classColCollapsed\r\n                .removeClass classColHide\r\n                .addClass classColShow\r\n\r\n            col = outerDiv.find \"colgroup col[data-colnode=\\\"#{h.node}\\\"]\"\r\n            col?.removeClass classColHide\r\n            col?.addClass classColShow\r\n                        \r\n            if h.children.length isnt 0\r\n                renderColAttrHeader h.th, h.value, h.key, false, false, true\r\n            h.th.colSpan = 1\r\n\r\n        collapseChildCol = (ch, h) ->\r\n            collapseChildCol ch[chKey], h for chKey in ch.children when hasClass ch[chKey].th, classColShow\r\n            hideChildCol ch\r\n\r\n        collapseCol = (axisHeaders, h, opts) ->\r\n            colSpan = h.th.colSpan - 1\r\n            collapseChildCol h[chKey], h for chKey in h.children when hasClass h[chKey].th, classColShow\r\n            if colSubtotalIsEnabled opts, h.col\r\n                if hasClass h.th, classColHide\r\n                    collapseHiddenColSubtotal h, opts\r\n                else \r\n                    collapseShowColSubtotal h, opts\r\n            if not hasClass h.th, classColHide        \r\n                p = h.parent\r\n                while p\r\n                    p.th.colSpan -= colSpan\r\n                    p = p.parent\r\n                emptyTopAttrTH?.colSpan -= colSpan    \r\n            h.clickStatus = clickStatusCollapsed\r\n            h.onClick = expandCol\r\n            axisHeaders.ah[h.col].expandedCount--\r\n            adjustColAxisHeader axisHeaders, h.col, opts\r\n\r\n        showChildCol = (ch) ->\r\n            outerDiv = $(ch.th).closest 'div.subtotalouterdiv'\r\n            outerDiv\r\n                .find \"tbody tr td[data-colnode=\\\"#{ch.node}\\\"], th[data-colnode=\\\"#{ch.node}\\\"]\"\r\n                .removeClass classColHide\r\n                .addClass classColShow\r\n\r\n            col = outerDiv.find \"colgroup col[data-colnode=\\\"#{ch.node}\\\"]\"\r\n            col?.removeClass classColHide\r\n            col?.addClass classColShow\r\n\r\n        expandHideColSubtotal = (h) ->\r\n            outerDiv = $(h.th).closest 'div.subtotalouterdiv'\r\n            outerDiv\r\n                .find \"tbody tr td[data-colnode=\\\"#{h.node}\\\"], th[data-colnode=\\\"#{h.node}\\\"]\" \r\n                .removeClass \"#{classColCollapsed} #{classColShow}\" \r\n                .addClass \"#{classColExpanded} #{classColHide}\"\r\n\r\n            col = outerDiv.find \"colgroup col[data-colnode=\\\"#{h.node}\\\"]\"\r\n            col?.removeClass classColShow\r\n            col?.addClass classColHide\r\n            \r\n            replaceClass h.th, classColHide, classColShow\r\n            renderColAttrHeader h.th, h.value, h.key, false, true, true\r\n\r\n        expandShowColSubtotal = (h) ->\r\n            outerDiv = $(h.th).closest 'div.subtotalouterdiv'\r\n            outerDiv\r\n                .find \"tbody tr td[data-colnode=\\\"#{h.node}\\\"], th[data-colnode=\\\"#{h.node}\\\"]\" \r\n                .removeClass \"#{classColCollapsed} #{classColHide}\"\r\n                .addClass \"#{classColExpanded} #{classColShow}\"\r\n\r\n            col = outerDiv.find \"colgroup col[data-colnode=\\\"#{h.node}\\\"]\"\r\n            col?.removeClass classColHide\r\n            col?.addClass classColShow\r\n            \r\n            h.th.colSpan++\r\n            renderColAttrHeader h.th, h.value, h.key, false, true, true\r\n\r\n        expandChildCol = (ch, opts) ->\r\n            if ch.children.length isnt 0 and opts.hideOnExpand and ch.clickStatus is clickStatusExpanded\r\n                replaceClass ch.th, classColHide, classColShow\r\n            else\r\n                showChildCol ch\r\n            if ch.sTh and ch.clickStatus is clickStatusExpanded and opts.hideOnExpand\r\n                replaceClass ch.sTh, classColShow, classColHide\r\n            expandChildCol ch[chKey], opts for chKey in ch.children if (ch.clickStatus is clickStatusExpanded or not colSubtotalIsEnabled opts, ch.col)\r\n            \r\n        expandCol = (axisHeaders, h, opts) ->\r\n            if h.clickStatus is clickStatusExpanded\r\n                adjustColAxisHeader axisHeaders, h.col, opts\r\n                return\r\n            colSpan = 0\r\n            for chKey in h.children\r\n                ch = h[chKey]\r\n                expandChildCol ch, opts\r\n                colSpan += ch.th.colSpan\r\n            h.th.colSpan = colSpan\r\n\r\n            if colSubtotalIsEnabled opts, h.col\r\n                if opts.hideOnExpand\r\n                    expandHideColSubtotal h\r\n                    --colSpan\r\n                else\r\n                    expandShowColSubtotal h\r\n            p = h.parent\r\n            while p\r\n                p.th.colSpan += colSpan\r\n                p = p.parent\r\n            emptyTopAttrTH?.colSpan += colSpan\r\n\r\n            h.clickStatus = clickStatusExpanded\r\n            h.onClick = collapseCol\r\n            axisHeaders.ah[h.col].expandedCount++\r\n            adjustColAxisHeader axisHeaders, h.col, opts\r\n\r\n        hideChildRow = (ch, opts) ->\r\n            replaceClass cell, classRowShow, classRowHide for cell in ch.tr.querySelectorAll \"th, td\"\r\n            replaceClass cell, classRowShow, classRowHide for cell in ch.sTr.querySelectorAll \"th, td\" if ch.sTr\r\n\r\n        collapseShowRowSubtotal = (h, opts) ->\r\n            renderRowAttrHeader h.arrowTh, \"\", h.key, undefined, true, false, h.isLastChildList\r\n            for cell in h.tr.querySelectorAll \"th, td\"\r\n                removeClass cell, \"#{classRowExpanded}\"\r\n                addClass cell, \"#{classRowCollapsed}\"\r\n            if h.sTr\r\n                for cell in h.sTr.querySelectorAll \"th, td\"\r\n                    removeClass cell, \"#{classRowExpanded}\"\r\n                    addClass cell, \"#{classRowCollapsed}\"\r\n\r\n        collapseChildRow = (ch, h, opts) ->\r\n            collapseChildRow ch[chKey], h, opts for chKey in ch.children\r\n            hideChildRow ch, opts\r\n\r\n        collapseRow = (axisHeaders, h, opts) ->\r\n            collapseChildRow h[chKey], h, opts for chKey in h.children\r\n            collapseShowRowSubtotal h, opts\r\n            h.clickStatus = clickStatusCollapsed\r\n            h.onClick = expandRow\r\n            axisHeaders.ah[h.col].expandedCount--\r\n            adjustRowAxisHeader axisHeaders, h.col, opts\r\n            callbacks.checkPadding()\r\n\r\n        showChildRow = (ch, opts) ->\r\n            replaceClass cell, classRowHide, classRowShow for cell in ch.tr.querySelectorAll \"th, td\"\r\n            replaceClass cell, classRowHide, classRowShow for cell in ch.sTr.querySelectorAll \"th, td\" if ch.sTr\r\n\r\n        expandShowRowSubtotal = (h, opts) ->\r\n            renderRowAttrHeader h.arrowTh, \"\", h.key, undefined, true, true, h.isLastChildList\r\n            for cell in h.tr.querySelectorAll \"th, td\"\r\n                removeClass cell, \"#{classRowCollapsed} #{classRowHide}\"\r\n                addClass cell, \"#{classRowExpanded} #{classRowShow}\"\r\n            if h.sTr\r\n                for cell in h.sTr.querySelectorAll \"th, td\"\r\n                    removeClass cell, \"#{classRowCollapsed} #{classRowHide}\"\r\n                    addClass cell, \"#{classRowExpanded} #{classRowShow}\"\r\n\r\n        expandHideRowSubtotal = (h, opts) ->\r\n            renderRowAttrHeader h.arrowTh, \"\", h.key, undefined, true, true, h.isLastChildList\r\n            for cell in h.tr.querySelectorAll \"th, td\"\r\n                removeClass cell, \"#{classRowCollapsed} #{classRowShow}\"\r\n                addClass cell, \"#{classRowExpanded} #{classRowHide}\"\r\n            for th in h.ths    \r\n                removeClass th, \"#{classRowCollapsed} #{classRowHide}\"\r\n            addClass cell, \"#{classRowExpanded} #{classRowShow}\"\r\n            if h.sTr\r\n                for cell in h.sTr.querySelectorAll \"th, td\"\r\n                    removeClass cell, \"#{classRowCollapsed} #{classRowShow}\"\r\n                    addClass cell, \"#{classRowExpanded} #{classRowHide}\"\r\n\r\n        expandChildRow = (ch, opts) ->\r\n            if ch.children.length isnt 0 and opts.hideOnExpand and ch.clickStatus is clickStatusExpanded\r\n                for th in ch.ths\r\n                    replaceClass th, classRowHide, classRowShow\r\n            else\r\n                showChildRow ch, opts\r\n            if ch.sTh and ch.clickStatus is clickStatusExpanded and opts.hideOnExpand\r\n                replaceClass ch.sTh, classRowShow, classRowHide\r\n            expandChildRow ch[chKey], opts for chKey in ch.children if (ch.clickStatus is clickStatusExpanded)\r\n\r\n        expandRow = (axisHeaders, h, opts) ->\r\n            if h.clickStatus is clickStatusExpanded\r\n                adjustRowAxisHeader axisHeaders, h.col, opts\r\n                return\r\n            for chKey in h.children\r\n                ch = h[chKey]\r\n                expandChildRow ch, opts\r\n            if h.children.length isnt 0 \r\n                if opts.hideOnExpand\r\n                    expandHideRowSubtotal h, opts\r\n                else\r\n                    expandShowRowSubtotal h, opts\r\n            h.clickStatus = clickStatusExpanded\r\n            h.onClick = collapseRow\r\n            axisHeaders.ah[h.col].expandedCount++\r\n            adjustRowAxisHeader axisHeaders, h.col, opts\r\n            callbacks.checkPadding()\r\n    \r\n        collapseColAxis = (axisHeaders, col, attrs, opts) ->\r\n            for i in [attrs.length-2..col] by -1\r\n                if colSubtotalIsEnabled opts, i\r\n                    for h in axisHeaders.ah[i].attrHeaders when h.clickStatus is clickStatusExpanded and h.children.length isnt 0\r\n                        axisHeaders.collapseAttrHeader axisHeaders, h, opts\r\n\r\n        collapseRowAxis = (axisHeaders, row, attrs, opts) ->\r\n            for i in [axisHeaders.ah.length-2..row] by -1\r\n                for h in axisHeaders.ah[i].attrHeaders when h.clickStatus is clickStatusExpanded and h.children.length isnt 0\r\n                    axisHeaders.collapseAttrHeader axisHeaders, h, opts \r\n\r\n        expandAxis = (axisHeaders, col, attrs, opts) ->\r\n            ah = axisHeaders.ah[col]\r\n            axisHeaders.expandAttrHeader axisHeaders, h, opts for h in axisHeaders.ah[i].attrHeaders for i in [0..col] \r\n            # when h.clickStatus is clickStatusCollapsed and h.children.length isnt 0 for i in [0..col] \r\n\r\n        createColGroup = (columnData) ->\r\n            colgroup = createElement \"colgroup\"\r\n            for cdata in columnData\r\n                column = createElement \"col\", null, { style :  \"width: #{cdata.width}px\", \"data-colnode\" : cdata.colnode }\r\n                colgroup.appendChild column\r\n            return colgroup\r\n        \r\n        getColumnWidth = (isAttrColumn, colKeyValues, axisValues, isArrow) ->\r\n            if callbacks?\r\n                return callbacks.getColumnWidth isAttrColumn, colKeyValues, axisValues, isArrow, rowGroups.length - 1\r\n            else\r\n                return if isArrow then 15 + 10 * (rowGroups.length - 1) else 50\r\n            \r\n        rowHeaderColsData = (trs, rowAttrsCnt) ->\r\n            if trs.length > 0\r\n                colCnt = findAxisHeadersColCount trs[0]\r\n                columns = ([] for i in [0...colCnt])\r\n                colsData = ({ width: 0 } for i in [0...colCnt])\r\n                \r\n                first = 0\r\n                if arrowColumnIsNeeded() \r\n                    colsData[0].width = getColumnWidth false, null, null, true\r\n                    first = 1\r\n\r\n                lastShift = 0                    \r\n                if colAttrs.length > 0 and not hideColAxisHeadersColumn\r\n                    colsData[colCnt-1].width = getColumnWidth false, null, [], false\r\n                    lastShift = 1\r\n                    \r\n                for rowIndex in [(trs.length-rowAttrsCnt)...trs.length]\r\n                    tr = trs[rowIndex]\r\n                    curColumn = first\r\n                    for i in [first...(tr.cells.length - lastShift)]\r\n                        th = tr.cells[i]\r\n                        if callbacks?\r\n                            value = callbacks.getHeaderCellValue th\r\n                        else\r\n                            value = th.textContent;\r\n                        columns[curColumn].push value\r\n                        curColumn += th.colSpan\r\n                \r\n                for i in [first...(colCnt - lastShift)] \r\n                    colsData[i].width = getColumnWidth false, null, columns[i], false  \r\n                return colsData\r\n            else    \r\n                return [getColumnWidth(true, [], null, false)]\r\n            \r\n        findAxisHeadersColCount = (tr) ->\r\n            colCnt = 0\r\n            for i in [0...tr.cells.length]\r\n                th = tr.cells[i]\r\n                colCnt += th.colSpan\r\n            return colCnt\r\n            \r\n        main = (rowAttrs, rowKeys, colAttrs, colKeys, clusterize) ->\r\n            rowAttrHeaders = []\r\n            colAttrHeaders = []\r\n\r\n            colKeyHeaders = processColKeys colAttrs, colKeys if colAttrs.length isnt 0 and colKeys.length isnt 0\r\n            rowKeyHeaders = processRowKeys rowAttrs, rowKeys, \"pvtRowLabel\", rowSplitPositions if rowAttrs.length isnt 0 and rowKeys.length isnt 0\r\n\r\n            outerDiv = createElement \"div\", \"subtotalouterdiv\"\r\n\r\n            headerDiv = createElement \"div\", \"headerdiv\" \r\n            headerTable = createElement \"table\", \"headertable pvtTable table\"\r\n\r\n            thead = createElement \"thead\"\r\n\r\n            outerDiv.appendChild headerDiv\r\n            headerDiv.appendChild headerTable\r\n            headerTable.appendChild thead\r\n\r\n            [colAxisHeaders, rowAxisHeaders, trs] = buildAxisHeaders thead, rowAttrs, colAttrs, opts\r\n            colsData = rowHeaderColsData trs, rowAxisHeaders.ah.length\r\n\r\n            if colAttrs.length isnt 0 \r\n                overallSpan = 0\r\n                if colKeyHeaders?\r\n                    node = counter: 0\r\n                    for chKey in colKeyHeaders.children\r\n                        buildColHeader callbacks, colAxisHeaders, colAttrHeaders, colKeyHeaders[chKey], rowAttrs, colAttrs, node, opts, colsData\r\n                        overallSpan += colKeyHeaders[chKey].th.colSpan\r\n\r\n                if not hideRowsTotalsCol        \r\n                    buildRowTotalsHeader colAxisHeaders.ah[0].tr, colAttrs.length, colsData\r\n                rowAttrHeadersCount = rowGroups.length\r\n                if rowAttrHeadersCount > colAttrs.length\r\n                    colspan = overallSpan + (if hideRowsTotalsCol then 0 else 1)\r\n                    emptyTopAttrTH = createElement \"th\", \"pvtEmptyHeader\", {colspan: colspan, rowspan: rowAttrHeadersCount - colAttrs.length}\r\n                    rowAxisHeaders.ah[0].tr.appendChild emptyTopAttrTH\r\n\r\n            bodyDiv = createElement \"div\", \"bodydiv\"\r\n            scrollDiv = createElement \"div\", \"scrolldiv\"\r\n            scrollDiv.onscroll = () ->\r\n                sLeft = scrollDiv.scrollLeft\r\n                headerDiv.scrollLeft = sLeft\r\n\r\n                #need for right border for the sticky columns\r\n                if(sLeft > 0)\r\n                    addClass headerTable, \"scrolled-left\"\r\n                    addClass bodyTable, \"scrolled-left\"\r\n                else\r\n                    removeClass headerTable, \"scrolled-left\"\r\n                    removeClass bodyTable, \"scrolled-left\"\r\n\r\n            bodyTable = createElement \"table\", \"bodytable pvtTable table\"\r\n            tbody = createElement \"tbody\"\r\n\r\n            outerDiv.appendChild bodyDiv\r\n            bodyDiv.appendChild scrollDiv\r\n            scrollDiv.appendChild bodyTable\r\n            bodyTable.appendChild tbody\r\n            \r\n            if rowAttrs.length isnt 0\r\n                if not hideRowsTotalsCol\r\n                    buildRowTotalsHeader rowAxisHeaders.ah[0].tr, rowGroups.length, colsData if colAttrs.length is 0\r\n                if rowKeyHeaders?\r\n                    node = counter: 0\r\n                    childrenCnt = rowKeyHeaders.children.length\r\n                    for i in [0...childrenCnt]\r\n                        chKey = rowKeyHeaders.children[i]\r\n                        buildRowHeader tbody, rowAxisHeaders, rowAttrHeaders, rowKeyHeaders[chKey], rowAttrs, colAttrs, node, [i == childrenCnt - 1], opts\r\n\r\n            buildValues scrollDiv, tbody, colAttrHeaders, rowAttrHeaders, rowAttrs, colAttrs, clusterize, opts\r\n            if not hideColsTotalRow\r\n                tr = buildColTotalsHeader longestGroupLength(rowGroups), colAttrs\r\n                buildColTotals tr, colAttrHeaders, rowAttrs, colAttrs, opts if colAttrs.length > 0\r\n                if not hideRowsTotalsCol\r\n                    buildGrandTotal tbody, tr, rowAttrs, colAttrs, opts\r\n                tbody.appendChild tr\r\n\r\n\r\n            collapseColAxis colAxisHeaders, opts.colSubtotalDisplay.collapseAt, colAttrs, opts.colSubtotalDisplay\r\n            collapseRowAxis rowAxisHeaders, opts.rowSubtotalDisplay.collapseAt, rowAttrs, opts.rowSubtotalDisplay\r\n\r\n            headerTable.style.display = \"\"\r\n            \r\n            bodyTable.style.display = \"\"\r\n\r\n            headerTable.insertBefore createColGroup(colsData), headerTable.firstChild\r\n            bodyTable.insertBefore createColGroup(colsData), bodyTable.firstChild\r\n\r\n            outerDiv.setAttribute \"data-numrows\", rowKeys.length\r\n            outerDiv.setAttribute \"data-numcols\", colKeys.length\r\n            \r\n            return outerDiv\r\n\r\n        return main rowAttrs, rowKeys, colAttrs, colKeys, clusterize\r\n\r\n    $.pivotUtilities.subtotal_renderers =\r\n        \"TABLE\"             : (pvtData, opts, clusterize) -> SubtotalRenderer pvtData, opts, clusterize\r\n        \"TABLE_BARCHART\"    : (pvtData, opts) -> $(SubtotalRenderer pvtData, opts).barchart()\r\n        \"TABLE_HEATMAP\"     : (pvtData, opts) -> $(SubtotalRenderer pvtData, opts).heatmap \"heatmap\", opts\r\n        \"TABLE_ROW_HEATMAP\" : (pvtData, opts) -> $(SubtotalRenderer pvtData, opts).heatmap \"rowheatmap\", opts\r\n        \"TABLE_COL_HEATMAP\" : (pvtData, opts) -> $(SubtotalRenderer pvtData, opts).heatmap \"colheatmap\", opts\r\n            \r\n    # \r\n    # Aggregators\r\n    #\r\n    usFmtPct = $.pivotUtilities.numberFormat digitsAfterDecimal:1, scaler: 100, suffix: \"%\"\r\n    aggregatorTemplates = $.pivotUtilities.aggregatorTemplates;\r\n\r\n    subtotalAggregatorTemplates =\r\n        fractionOf: (wrapped, type=\"row\", formatter=usFmtPct) -> (x...) -> (data, rowKey, colKey) ->\r\n            rowKey = [] if typeof rowKey is \"undefined\"\r\n            colKey = [] if typeof colKey is \"undefined\"\r\n            selector: {row: [rowKey.slice(0, -1),[]], col: [[], colKey.slice(0, -1)]}[type]\r\n            inner: wrapped(x...)(data, rowKey, colKey)\r\n            push: (record) -> @inner.push record\r\n            format: formatter\r\n            value: -> @inner.value() / data.getAggregator(@selector...).inner.value()\r\n            numInputs: wrapped(x...)().numInputs\r\n\r\n    $.pivotUtilities.subtotalAggregatorTemplates = subtotalAggregatorTemplates\r\n\r\n    $.pivotUtilities.subtotal_aggregators = do (tpl = aggregatorTemplates, sTpl = subtotalAggregatorTemplates) ->\r\n        \"Sum As Fraction Of Parent Row\":        sTpl.fractionOf(tpl.sum(), \"row\", usFmtPct)\r\n        \"Sum As Fraction Of Parent Column\":     sTpl.fractionOf(tpl.sum(), \"col\", usFmtPct)\r\n        \"Count As Fraction Of Parent Row\":      sTpl.fractionOf(tpl.count(), \"row\", usFmtPct)\r\n        \"Count As Fraction Of Parent Column\":   sTpl.fractionOf(tpl.count(), \"col\", usFmtPct)\r\n\r\n"
  ]
}