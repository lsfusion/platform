<p align="center">
  <a href="https://github.com/lsfusion/platform#lsfusion-">English</a> |
  <span>Русский</span>
</p>

# lsFusion <a href="http://lsfusion.org" target="_blank"><img src="https://lsfusion.org/themes/lsfusion/assets/images/i-logo-lsfusion.svg" align="right"/></a>  

Бесплатная открытая платформа разработки информационных систем на основе одноименного языка пятого поколения.

Использование механизмов инкрементальных вычислений, комбинаторного, реактивного и событийного программирования, возможность записи и итерирования по всем значениям функций, множественные наследование и полиморфизм, отказ от инкапсуляции и ряд других принципиально новых идей позволяет на порядок повысить скорость и качество разработки, а также быстродействие создаваемых систем по сравнению с традиционными подходами.

[comment]: <> (---)

[comment]: <> (<p align="center">)
[comment]: <> (<a href="#main-features">Основные возможности</a> •)
[comment]: <> (<a href="#installation">Установка</a> •)
[comment]: <> (  <a href="#code-examples">Примеры кода</a> •)
[comment]: <> (  <a href="#try-online">Попробовать онлайн</a> •)
[comment]: <> (  <a href="#online-demos">Демонстрационные примеры</a> •)
[comment]: <> (  <a href="#links">Ссылки</a> •)
[comment]: <> (  <a href="#feedback">Обратная связь</a> •)
[comment]: <> (  <a href="#license">Лицензия</a>)
[comment]: <> (</p>)

[comment]: <> (---)

## Основные возможности
- **Один язык работы с данными**

  В платформе отсутствует [объектно-реляционный семантический разрыв](https://en.wikipedia.org/wiki/Object-relational_impedance_mismatch) - когда разработчику приходится постоянно выбирать между "быстрыми" SQL-запросами и кодом на "удобном" императивном языке. И тот и другой подход абстрагированы и объединены настолько, что грань между ними практически отсутствует. Разработчик всегда работает с данными в одной парадигме, а за то, как и где вся эта работа будет выполняться, полностью отвечает сама платформа.

- **No ORM, Yes SQL**

  Если некоторое действие предполагает обработку данных сразу для множества объектов, платформа пытается по возможности выполнить эту обработку на сервере БД одним запросом (то есть сразу для всех объектов). Все формируемые запросы при этом максимально оптимизируются с учетом особенностей используемого сервера БД.

- **Абсолютная реактивность**

  Все вычисляемые данные автоматически обновляются при изменении данных, которые они используют. Это правило действует всегда и везде - как при отображении интерактивных форм, так и просто при обращении к данным внутри выполняемого действия.

- **Динамическая физическая модель**

  Платформа позволяет в любой момент материализовать любой из существующих показателей в системе, добавить новые или удалить существующие таблицы, а также изменить расположение материализованных показателей в этих таблицах.

- **Ограничения любых данных**

  В платформе существует возможность создавать ограничения значений любых (в том числе вычисляемых) данных. При этом, все созданные ограничения (как и события) глобальны, а значит неопытный пользователь или разработчик не сможет обойти их неправильно проведенной транзакцией.

- **Эффективное общение клиента с сервером**

  Общение клиента с сервером на физическом уровне построено таким образом, чтобы минимизировать количество синхронных round-trip обращений (то есть одно действие пользователя - один запрос-ответ, по возможности асинхронный). Помимо этого в десктоп-клиенте все передаваемые данные архивируются и, при необходимости, шифруются. Также, при общении клиента с сервером (как десктоп-клиента через TCP/IP протокол, так и веб-клиента через HTTP протокол), в платформе обеспечивается гарантия доставки, то есть в случае если какие-то запросы теряются, платформа посылает их повторно, причем с гарантией того, что они будут обработаны в правильном порядке. Все вышеперечисленное позволяет платформе эффективно функционировать даже на узких и ненадежных каналах связи, а также каналах связи с большим временем отклика.

- **Трехзвенная архитектура**

  Платформа построена таким образом, что императивная часть логики системы (все что связано с изменением данных) выполняется на серверах приложений, а декларативная (все что связано с вычислением данных) - на серверах БД. Такое разделение упрощает масштабирование разрабатываемой системы, а также в силу разного характера нагрузки на эти сервера повышает ее отказоустойчивость (к примеру, использование swap на сервере приложений гораздо опасней, чем его же использование на сервере БД)

- **Everything as code**

  Все элементы системы, от событий до дизайна форм, задаются в виде кода на языке lsFusion, хранящегося в обычных текстовых файлах (без каких-либо общих репозитариев с неизвестной структурой). Это позволяет использовать при работе с проектами популярные системы контроля версий (Git, Subversion) и сборки проектов (Maven, встроенные в IDE). Кроме того, такой подход упрощает процесс поддержки / развертывания разработанной системы, так как позволяет, во-первых, при помощи обычного текстового редактора просматривать, и, при необходимости, оперативно изменять логику, а, во-вторых, легко идентифицировать любой элемент в системе, по его файлу и номеру строки в этом файле.

- **Язык программирования lsFusion**

  - Полиморфизм и агрегации

      Поддержка механизмов наследования (в том числе множественного) и полиморфизма (опять-таки, в том числе множественного). Если механизма наследования по каким либо причинам недостаточно, в платформе также существует механизм агрегаций, который вместе с наследованием позволяет реализовать практически любую полиморфную логику.

  - Модульность и расширения

      Техника расширений позволяет разработчику расширять в одном модуле функционал другого модуля (например, изменять формы или классы созданные в другом модуле). Использование этого механизма позволяет значительно повысить модульность создаваемых решений.

  - Метапрограммирование

      Хотите создать свой высокоуровневый оператор или просто не знаете как обобщить логику, но хотите использовать ее повторно? В платформе реализована полная поддержка автоматической генерации кода, причем как со стороны сервера, так и со стороны IDE.

  - Пространства имен
  - Интеграция с Java и SQL
  - Интернационализация

- **Эргономичная IDE**

  IDE на базе Intellij IDEA с полным арсеналом разработчика - поиск использований, подсветка кода / ошибок, умное автодополнение, переход к объявлению, структура класса, переименование элементов, дерево использований, брейкпоинты изменения данных, отладчик и множество других возможностей.

- **Развитые средства администрирования**

  Платформа предоставляет целый набор инструментов администрирования уже работающей системы: интерпретатор - выполняет код на языке lsFusion, монитор процессов - получает информацию о текущих процессах с различной информацией о них (например, время начала вызова, стек, пользователь и т.п.), планировщик - выполняет действия в заданные моменты времени (в том числе периодически), профайлер - замеряет производительность всех выполняемых действий для всех / заданных пользователей (строит граф вызовов, разделение времени между сервером приложений и сервером БД и т.п.), чат - для оповещения / общения с пользователями внутри системы, а также многочисленные журналы и логи (подключений, ошибок и т.п.)

Более полный список возможностей можно найти на [веб-сайте](https://ru.lsfusion.org/opportunities).

## Установка
### Windows 
- **Разработка**

    Программы установки **lsFusion 4.1**, которые установят все необходимое для разработки в один клик (OpenJDK 11.0.9, PostgreSQL 13.1(x64)/10.8(x32), Tomcat 9.0.21, IntelliJ IDEA Community Edition 2020.3.1)  
    - [x32](https://download.lsfusion.org/exe/lsfusion-dev-4.1.exe)  
    - [x64](https://download.lsfusion.org/exe/lsfusion-dev-4.1-x64.exe)

    Помимо **lsFusion** эти программы также устанавливают **OpenJDK**, **PostgreSQL**, **Tomcat** и **IntelliJ IDEA Community Edition** со встроенным **lsFusion плагином**. Если какие-то из этих программ уже есть на вашем компьютере, то их можно будет исключить в процессе установки.

    После того как установка успешно завершится, на рабочем столе будут автоматически созданы соответствующие ярлыки для запуска IDE и клиента. Описание работы с IDE после ее запуска находится [здесь](https://ru-documentation.lsfusion.org/display/LSFUS/IDE).

- **Запуск**

    Программы установки **lsFusion 4.1 Server & Client**, которые установят все необходимое в один клик (OpenJDK 11.0.9, PostgreSQL 13.1(x64)/10.8(x32), Tomcat 9.0.21)
    - [x32](https://download.lsfusion.org/exe/lsfusion-4.1.exe)  
    - [x64](https://download.lsfusion.org/exe/lsfusion-4.1-x64.exe)

    Помимо установки **lsFusion** эти программы / скрипты установки также устанавливают **OpenJDK**, **PostgreSQL** и **Tomcat**. При этом **Tomcat** встраивается в установку **lsFusion Client**, а **OpenJDK** и **PostgreSQL** устанавливаются отдельно (в частности, в отдельные папки).

### Linux
- **Разработка**

    1. [Установите](https://www.jetbrains.com/help/idea/installation-guide.html) **Intellij IDEA Community Edition**.
    1. Установите [Intellij IDEA плагин для lsFusion](https://plugins.jetbrains.com/plugin/7601-lsfusion). В настройках IDEA `File > Settings` выбрать `Plugins > Marketplace`, найти **lsFusion** плагин, нажать **Install**, перезапустить IDEA. 
    1. Создайте новый lsFusion проект в IDEA:
    
        1. Выберите пункт **Create New Project** при старте IDEA. Или, если IDEA уже запущена, выберите в меню пункт `File > New > Project`. 
        1. Выберите тип проекта **lsFusion**. Проверьте, что задан JDK. 
        1. Нажмите на кнопку **Download**: IDEA автоматически скачает jar-файл последней (не beta) версии сервера lsFusion с центрального сервера и установит этот файл в качестве зависимости этого проекта (а точнее единственного его модуля: `File > Project Structure > Modules > имя проекта > Dependencies`). Также, при необходимости, можно скачать другую (отличную от последней) версию сервера или выбрать уже скачанный jar-файл сервера на локальном диске.  
    
    После старта сервера, в логе старта одной из последних строк будет строка с ссылкой на jnlp-файл, запустив который клиент автоматически установится при помощи технологии Java Web Start.
   
- **Запуск**

    **lsFusion 4 Server & Client** (OpenJDK 1.8, PostgreSQL 11, Tomcat 9.0.21).

    - RHEL 7 / CentOS 7 / Fedora 29

          source <(curl -s https://download.lsfusion.org/yum/install-lsfusion4)

    - Ubuntu 18 / Debian 9

          source <(curl -s https://download.lsfusion.org/apt/install-lsfusion4)

Для более детального описания процесса установки обратитесь к соответствующему [разделу документации](https://ru-documentation.lsfusion.org/pages/viewpage.action?pageId=18645035). 

## Примеры кода
- [Турнирная таблица](https://ru-documentation.lsfusion.org/pages/viewpage.action?pageId=2228240)

  Простое приложение, позволяющее рассчитывать турнирную таблицу хоккейного турнира. В нем существует ровно одна форма, в которой пользователь может вводить результаты матчей, на основе которых автоматически строится турнирная таблица.
  
  При помощи этого примера можно получить представление, как быстро разрабатывать "Excel-style" приложения, в которых данные на формах доступны для редактирования, и при любом их изменении все зависимые данные на форме обновляются инкрементно.

- [Управление материальными потоками](https://ru-documentation.lsfusion.org/pages/viewpage.action?pageId=2228636)

  Пример создания простого бизнес-приложения по управлению складом. В нем пользователь может фиксировать документы приходов и расходов, а также получать остатки по товарам.

  В данном примере показан способ создания приложения по обработке документов, в которых есть шапка и строки. Все формы созданы по "Dialog style" принципу. В таком подходе для каждого объекта в системе создается форма с их списком, в которой доступны для редактирования только кнопки по созданию, редактированию и удалению объектов. При нажатии соответствующей кнопки открывается отдельная диалоговая форма, при помощи которой пользователь добавляет новый или редактирует существующий объект.

- [How-To](https://ru-documentation.lsfusion.org/display/LSFUS/How-to)

  Раздел документации How-to содержит примеры типовых задач, разбитые по категориям.

## Попробовать онлайн 
Существует возможность выполнять код на языке lsfusion [онлайн](https://lsfusion.org/try).

## Демонстрационные примеры
- [Турнирная таблица](https://demo.lsfusion.org/hockeystats) 
  - [описание](https://ru-documentation.lsfusion.org/pages/viewpage.action?pageId=2228240) 
  - [github](https://github.com/lsfusion/samples/tree/master/hockeystats) 
  - логин: guest
  - пароль: guest 

- [Управление материальными потоками](https://demo.lsfusion.org/mm)
  - [описание](https://ru-documentation.lsfusion.org/pages/viewpage.action?pageId=2228636)
  - [github](https://github.com/lsfusion/samples/tree/master/mm) 
  - логин: guest
  - пароль: guest 

- [ERP](https://demo.lsfusion.org/erp)

  Коммерческая ERP-система с широким функционалом, работающая на предприятиях с более чем 500 одновременно работающих пользователей.

  - [github](https://github.com/lsfusion-solutions/erp)
  - логин: guest
  - пароль: guest

  В качестве демо-версии используется модуль [equ-erp-logics](https://github.com/lsfusion/erp/tree/master/erp-equ-logics), который включает в себя: базовую [ERP логику](https://github.com/lsfusion/erp/tree/master/erp-logics) + интерфейсы общения ([equ-srv](https://github.com/lsfusion/erp/tree/master/equ-srv)) с сервером оборудования ([equ-clt](https://github.com/lsfusion/erp/tree/master/equ-clt)).

## Ссылки
- [Страница проекта](https://ru.lsfusion.org/)
- [Документация](https://ru-documentation.lsfusion.org/)
- [Блог](https://habr.com/ru/company/lsfusion/blog/)
- [Q&A](https://ru.stackoverflow.com/questions/tagged/lsfusion)
- [Репозиторий](https://github.com/lsfusion/platform)
- [Скачать](https://download.lsfusion.org/)


## Обратная связь
- [Issue tracker](https://github.com/lsfusion/platform/issues) 
- [Сообщество в Slack](https://slack.lsfusion.org)

## Лицензия
Платформа выпускается под лицензией [LGPL v3](http://www.gnu.org/licenses/lgpl-3.0.ru.html), позволяющей свободно использовать, распространять, а также модифицировать платформу под свои нужды.